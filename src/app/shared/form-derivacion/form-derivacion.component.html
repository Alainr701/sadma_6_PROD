<div class="modal-overlay" *ngIf="isModalVisible" style="z-index: 9 !important;">
    <div class="modal-container">
      <div class="modal-header">
        <h2>Derivacion Externa {{codigoInterno}} ORIGINAL</h2>
        <button  (click)=cerarModalHTML() class="close-button">&times;</button>
      </div>
  
      <div class="modal-content">
        <div class="step-indicator">
          <div [class.active]="step === 1">
            <span>1</span>
            <p>ELEGIR DEPENDENCIA</p>
          </div>
          <div [class.active]="step === 2">
            <span>2</span>
            <p>DATOS PROVEIDO</p>
          </div>
          <div [class.active]="step === 3">
            <span>3</span>
            <p>ARCHIVOS</p>
          </div>
        </div>
  
        <div *ngIf="step === 1">
          <!-- Select para DEPENDENCIA -->
          <div class="form-group">
            <label>DEPENDENCIA</label>
            <select [(ngModel)]="formData.dependency" class="form-control" (ngModelChange)="onDependencyChange()">
              <option *ngFor="let persona of listaPersonas" [value]="persona.id_personas">
                {{ persona.nombre }} <!-- Aquí muestras solo el nombre de la unidad -->
              </option>
            </select>
          </div>
          
        
          <!-- Select para RECEPCIÓN (solo muestra la persona seleccionada) -->
          <div class="form-group">
            <label>RECEPCIÓN</label>
            <select [(ngModel)]="formData.reception" class="form-control">
              <option *ngIf="selectedPersona">
                {{ selectedPersona.nombres }} {{ selectedPersona.apellidos }} 
              </option>
            </select>
          </div>
        </div>
        
  
        <div *ngIf="step === 2">
          <div class="form-group">
            <label>Seleccionar Proveido</label>
            <select [(ngModel)]="formData.provider">
              <option>Ej: Para su Atencion</option>
            </select>
          </div>
          <div class="form-group">
            <label>Obs:</label>
            <textarea [(ngModel)]="formData.observation" placeholder="Existe alguna Observacion?"></textarea>
          </div>
          <div class="form-group">
            <label>Plazo(Dias):</label>
            <input type="number" [(ngModel)]="formData.days">
          </div>
        </div>
  
        <div *ngIf="step === 3">
          <fieldset class="border p-3 mb-3">
            <legend class="w-auto px-2">SUBIR ARCHIVOS</legend>
            <p>Nota: Los archivos deben estar en formato PDF y no deben pesar más de 2MB.</p>
            <input 
            type="file" 
            id="archivo"
            (change)="subirArchivo($event)" 
            >
            <!-- (change)="subirArchivo($event.target.files)" -->
            <!-- <button class="btn btn-success" (click)="subirArchivo()">
              <i class="fas fa-upload"></i> Subir Archivo
            </button> -->
          </fieldset>
        </div>
  
        <div class="button-group">
          <button *ngIf="showBackButton()" (click)="handleBack()" class="back-button">Atras</button>
          <div class="spacer" *ngIf="!showBackButton()"></div>
          <button *ngIf="step < 3" (click)="handleNext()" class="next-button">Siguiente</button>
          <button *ngIf="step === 3" (click)="submitForm()" class="submit-button">Derivar Hoja de Ruta</button>
        </div>
      </div>
    </div>
  </div>

